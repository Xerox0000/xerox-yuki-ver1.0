<!DOCTYPE html>
<html lang="ja">

<head>
    <title>xerox yt</title>
    <link rel="icon" href="/templates/icon.jpg" type="image/x-icon">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="/css/empty.css">
    <link rel="stylesheet" href="/css/pure-min.css">
    <link rel="stylesheet" href="/css/grids-responsive-min.css">
    <link rel="stylesheet" href="/css/ionicons.min.css">
    <link rel="stylesheet" href="/css/default.css">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" />
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
</head>

<body class="no-theme">
    <div class="pure-g h-box" id="search-widget">
        <div class="pure-u-1" id="logo">
            <h1 href="/" class="pure-menu-heading">xerox YT</h1>
            <a href="/bbs"></a><br>
            <a href="https://sites.google.com/view/xerox-interstellar-yt/proxy%E3%82%A4%E3%83%B3%E3%82%B9%E3%82%BF%E3%83%AC%E3%83%BC%E3%83%A9%E3%83%BC">xeroxが作るプロキシはこちら</a>
            <button id="history-button">履歴</button>
        </div>
        <div class="pure-u-1-4"></div>
        <div class="pure-u-1 pure-u-md-12-24 searchbar">
            <form class="pure-form" action="/search" method="get">
                <fieldset>
                    <input type="search" id="searchbox" autocomplete="on" autocorrect="on" autocapitalize="none"
                        spellcheck="false" autofocus="" name="q" placeholder="検索" title="検索" value="">
                </fieldset>
            </form>
        </div>
        <div class="pure-u-1-4"></div>
    </div>
    <div id="history-list"></div>

    <script>
        // Cookieを取得する関数
        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
        }

        // Cookieに保存する関数
        function setCookie(name, value, days) {
            let expires = "";
            if (days) {
                const date = new Date();
                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                expires = "; expires=" + date.toUTCString();
            }
            document.cookie = name + "=" + (value || "") + expires + "; path=/";
        }

        // 履歴を表示する関数
        function displayHistory() {
            const historyList = document.getElementById('history-list');
            historyList.innerHTML = '';

            const historyCookie = getCookie('videoHistory');
            if (historyCookie) {
                const historyArray = JSON.parse(historyCookie);
                historyArray.forEach((item, index) => {
                    const div = document.createElement('div');
                    div.textContent = `${index + 1}: ${item}`;
                    historyList.appendChild(div);
                });
            } else {
                historyList.textContent = '履歴はありません。';
            }
        }

        // ページ読み込み時に再生した動画を保存する例（仮の実装）
        function savePlayedVideo(videoTitle) {
            let history = getCookie('videoHistory');
            history = history ? JSON.parse(history) : [];
            history.push(videoTitle);
            setCookie('videoHistory', JSON.stringify(history), 365);
        }

        document.addEventListener('DOMContentLoaded', () => {
            // 履歴ボタンのクリックイベント
            document.getElementById('history-button').addEventListener('click', displayHistory);

            // 仮の実装: 動画再生イベント（実際の実装に応じて変更が必要）
            // ここでは例として動画タイトルを保存する関数を呼び出します。
            // 動画が再生されるイベントに基づいてこの関数を呼び出してください。
            // savePlayedVideo('再生した動画のタイトル');
        });
    </script>
</body>

</html>
